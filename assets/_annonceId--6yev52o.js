import{i7 as j,a9 as S,i8 as A,i9 as v,ia as w,ib as N,j as e,q as b,af as G,aj as L,o as R,ic as _,x as d}from"./index-rxBL8Pzd.js";import{u as F}from"./getWilaya-BuqY3Fa7.js";function $(){const{lang:s,annonceId:r}=j.useParams(),o=S(),{data:u,isLoading:m}=A(r),n=u?.annonce,{data:x}=v(n?.classes[0].id??null),{data:p,isLoading:g}=w(n?.classes[0].id??null),{data:h}=F({lang:s==="ar"?"ar_AR":"fr_FR"}),l=N();async function y(a){try{const t=a.classGrandChild||a.classChild||a.class,i=a.features?Object.entries(a.features).filter(([,c])=>c!==void 0&&c!=="").map(([c,f])=>({id:c,value:String(f)})):void 0;await l.mutateAsync({annonceId:r,payload:{telephone:a.telephone,region:a.region,catalogue:t,features:i}}),d.success("Ad created successfully! It will be reviewed shortly."),o({to:"/$lang/mes_annonces",params:{lang:s}});return}catch(t){const i=t.response?.data?.message||t.message||"Failed to complete ad creation";d.error(i)}}function C(){o({to:"/$lang/mes_annonces",params:{lang:s}})}return m||g?e.jsx("div",{className:"container mx-auto max-w-2xl py-4 px-4",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(b,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):n?e.jsx("div",{className:"container mx-auto max-w-2xl py-4 px-4",children:e.jsx(_,{annonce:n,wilayas:h||[],childClasses:x?.classes||[],features:p?.carax||[],onSubmit:y,onCancel:C,isSubmitting:l.isPending})}):e.jsx("div",{className:"container mx-auto max-w-2xl py-4 px-4",children:e.jsx(G,{children:e.jsxs(L,{className:"py-12 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"Annonce not found"}),e.jsx(R,{variant:"outline",className:"mt-4",onClick:()=>o({to:"/$lang/ads/create",params:{lang:s}}),children:"Go back to create"})]})})})}export{$ as component};
