import{n as c,_ as i,o as u}from"./index-BdqRUGKt.js";import{u as o}from"./useMutation-WBesNOfB.js";const y={"CmsContent.Status.Valider_Content":"active","CmsContent.Status.EnAttente_Content":"pending","CmsContent.Status.Rejeter_Content":"rejected","CmsContent.Status.Archiver_Content":"archived"},m=e=>y[e]??"pending",v=({status:e="all"})=>c({queryKey:["mes_annonces",e],staleTime:1e5,queryFn:async()=>{const{data:a}=await u.get("/api/annonces/"+e);return{...a,data:a.data.map(s=>({...s,Status:m(s.Status)}))}}}),C=()=>c({queryKey:["mes_annonces","status_counts"],staleTime:1e5,queryFn:async()=>{const{data:n}=await u.get("/api/annonces/status-counts");return n.status_counts}}),q=()=>{const e=i();return o({mutationFn:async({id:n})=>{const{data:a}=await u.post(`/api/annonces/archive/${n}`);return a},onMutate:({id:n,previousStatus:a})=>({id:n,previousStatus:a}),onSuccess:async(n,a,s)=>{await e.cancelQueries({queryKey:["mes_annonces","all"]}),await e.cancelQueries({queryKey:["mes_annonces","status_counts"]}),e.setQueryData(["mes_annonces","all"],t=>t&&{...t,data:t.data.map(r=>r.Id_CmsAnnonce===s?.id?{...r,Status:"archived"}:r)}),s?.previousStatus&&e.setQueryData(["mes_annonces","status_counts"],t=>t&&{...t,[s?.previousStatus]:t[s?.previousStatus]-1,archived:t.archived+1}),e.invalidateQueries({queryKey:["mes_annonces"]})}})},l=()=>{const e=i();return o({mutationFn:async({id:n})=>{const{data:a}=await u.post(`/api/annonces/active/${n}`);return a},onMutate:async({id:n})=>(await e.cancelQueries({queryKey:["mes_annonces","all"]}),await e.cancelQueries({queryKey:["mes_annonces","status_counts"]}),{id:n}),onSuccess:(n,a,s)=>{e.setQueryData(["mes_annonces","all"],t=>t&&{...t,data:t.data.map(r=>r.Id_CmsAnnonce===s?.id?{...r,Status:"active"}:r)}),e.setQueryData(["mes_annonces","status_counts"],t=>t&&{...t,archived:t.archived-1,active:t.active+1}),e.invalidateQueries({queryKey:["mes_annonces"]})}})},S=()=>c({queryKey:["catalogue_options"],staleTime:1/0,queryFn:async()=>{const{data:e}=await u.get("/api/annonces/options/classes");return e}}),d=()=>{const e=i();return o({mutationFn:async n=>{const{data:a}=await u.post("/api/annonces/create-first",n);return a},onSuccess:()=>{e.invalidateQueries({queryKey:["mes_annonces"]})}})};export{C as a,q as b,l as c,S as d,d as e,v as u};
