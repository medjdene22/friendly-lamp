import{l as w,a1 as C,$ as S,j as e,a2 as P,t as d,a3 as l,a4 as A}from"./index-BdqRUGKt.js";import{u as F,a as I}from"./zod-Bx9n9BJV.js";import{B as m}from"./button-BYwslC_x.js";import{I as u}from"./input-BciPiqCc.js";import{L as i}from"./label-BMoW_mP4.js";import{C as L,a as k,b as D,c as _,d as T}from"./card-XCGFoiXO.js";import{S as $,a as V,b as B,c as M,d as O,e as G,f as R}from"./select-CSw8QctX.js";import{d as U,e as q}from"./annonces-DXLOpVBk.js";import{L as p}from"./loader-circle-CQuOfnsK.js";import"./index-DBzOYNu8.js";import"./index-DBXKSM9E.js";import"./index-CCaEs6ap.js";import"./Combination-C2SvYgU7.js";import"./index-Dnu4P-Wc.js";import"./index-BslC7Nf8.js";import"./index-BQFSzsI0.js";import"./chevron-up-D3RS20AP.js";import"./useMutation-WBesNOfB.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],x=w("circle-plus",E),H=P({title:l().min(5,"Title must be at least 5 characters").max(100,"Title must be less than 100 characters"),description:l().min(20,"Description must be at least 20 characters").max(2e3,"Description must be less than 2000 characters"),price:A({error:"Price is required"}).min(0,"Price must be positive"),catalogue:l().min(1,"Please select a category")});function de(){const{lang:n}=C.useParams(),o=S(),{data:h,isLoading:g}=U(),r=q(),{register:c,handleSubmit:j,setValue:f,watch:b,formState:{errors:s}}=F({resolver:I(H),defaultValues:{title:"",description:"",price:void 0,catalogue:""}}),N=b("catalogue");async function v(a){try{await r.mutateAsync(a),d.success("Ad created successfully! It will be reviewed shortly."),o({to:"/$lang/mes_annonces",params:{lang:n}})}catch(t){const y=t.response?.data?.message||t.message||"Failed to create ad";d.error(y)}}return e.jsx("div",{className:"container mx-auto max-w-2xl py-8 px-4",children:e.jsxs("form",{onSubmit:j(v),className:"space-y-6",children:[e.jsxs(L,{className:"border-border shadow-sm hover:shadow-md transition-shadow duration-300",children:[e.jsxs(k,{children:[e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-5 w-5 text-[#82ae26]",strokeWidth:"2.5"}),"Create New Ad"]}),e.jsx(_,{children:"Fill in the details below to publish your ad"})]}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"title",children:"Title"}),e.jsx(u,{id:"title",placeholder:"e.g., Used iPhone 13 Pro",...c("title"),className:"transition-all focus:ring-2 focus:ring-[#82ae26]/20"}),s.title&&e.jsx("p",{className:"text-sm text-destructive",children:s.title.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"catalogue",children:"Category"}),g?e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[e.jsx(p,{className:"h-4 w-4 animate-spin"}),"Loading categories..."]}):e.jsxs($,{value:N,onValueChange:a=>f("catalogue",a),children:[e.jsx(V,{id:"catalogue",children:e.jsx(B,{placeholder:"Select a category"})}),e.jsx(M,{children:h?.categories.map(a=>e.jsxs(O,{children:[e.jsx(G,{children:a.name}),a.classes.map(t=>e.jsx(R,{value:`${t.Id_Classe}@${t.Id_PrdCatalogProduit}`,children:t.Name},t.Id_Classe))]},a.name))})]}),s.catalogue&&e.jsx("p",{className:"text-sm text-destructive",children:s.catalogue.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"price",children:"Price (DZD)"}),e.jsx(u,{id:"price",type:"number",min:0,placeholder:"e.g., 125000",...c("price",{valueAsNumber:!0}),className:"transition-all focus:ring-2 focus:ring-[#82ae26]/20"}),s.price&&e.jsx("p",{className:"text-sm text-destructive",children:s.price.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",placeholder:"Describe your item in detail...",...c("description"),rows:5,className:"flex min-h-[120px] w-full rounded-md border border-input bg-[#f5f5f5] px-3 py-2 text-sm shadow-xs placeholder:text-muted-foreground focus-visible:outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 transition-all dark:bg-input/30"}),s.description&&e.jsx("p",{className:"text-sm text-destructive",children:s.description.message})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Tips for a great ad:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-[#82ae26]"}),"Use a clear and descriptive title"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-[#82ae26]"}),"Include condition, features, and specifications"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-[#82ae26]"}),"Set a competitive price"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-[#82ae26]"}),"Be honest about any defects or issues"]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>o({to:"/$lang/mes_annonces",params:{lang:n}}),children:"Cancel"}),e.jsx(m,{type:"submit",disabled:r.isPending,className:"min-w-[150px] shadow-lg hover:shadow-xl transition-all duration-300",children:r.isPending?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"mr-2 h-4 w-4"}),"Create Ad"]})})]})]})})}export{de as component};
