import{a0 as t,$ as f,t as o,o as j,j as e,L as w}from"./index-BdqRUGKt.js";import{u as N}from"./useMutation-WBesNOfB.js";import{B as v}from"./button-BYwslC_x.js";import{I as l}from"./input-BciPiqCc.js";import{L as m}from"./label-BMoW_mP4.js";import{L as y}from"./Logo-D2znwoHw.js";import{L}from"./loader-circle-CQuOfnsK.js";import"./index-DBzOYNu8.js";import"./index-DBXKSM9E.js";function z(){const c=t.useRouteContext().queryClient,{redirectUrl:d}=t.useRouteContext(),{callbackUrl:u}=t.useSearch(),p=f(),{mutate:x,isPending:a}=N({mutationFn:async s=>{try{return(await j.post("/api/auth/login",{email:s.email,password:s.password})).data}catch(r){throw new Error(r.response?.data?.message||"An error occurred while signing in.")}},onError:s=>{o.error(s.message||"An error occurred while signing in.")},onSuccess:async()=>{o.success("login succes "),c.removeQueries({queryKey:["user"]}),p({to:u??d})}}),g=s=>{if(s.preventDefault(),a)return;const r=new FormData(s.currentTarget),i=r.get("email"),n=r.get("password");!i||!n||x({email:i,password:n})},h=t.useParams().lang;return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("form",{onSubmit:g,children:e.jsxs("div",{className:"flex flex-col gap-12",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-md",children:e.jsx(y,{label:"Fibladi ",size:"size-10",className:"  justify-center  ",textclassName:"text-2xl  md:text-4xl  font-medium  font-family-be-vietnam-pro ",link:"https://fibladi.com/fr"})}),e.jsx("span",{className:"sr-only",children:"Fibladi"})]}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(l,{id:"email",name:"email",type:"email",placeholder:"hello@example.com",readOnly:a,required:!0,autoComplete:"username"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(l,{id:"password",name:"password",type:"password",placeholder:"Enter password here",readOnly:a,required:!0,autoComplete:"current-password"})]}),e.jsxs(v,{type:"submit",className:"mt-2 w-full text-lg md:text-lg",size:"lg",disabled:a,children:[a&&e.jsx(L,{className:"animate-spin"}),a?"Logging in...":"Login"]})]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2"})]})}),e.jsxs("div",{className:"text-center text-sm",children:["Don't have an account?"," ",e.jsx(w,{to:"/$lang/signup",params:{lang:h},className:"underline underline-offset-4",children:"Sign up"})]}),e.jsxs("div",{className:"text-center text-sm",children:[e.jsx("p",{children:"imad55777@gmail.com"}),e.jsx("p",{children:"imad55777"})]})]})}export{z as component};
