import{r as l,aJ as E,aF as H,j as e,aH as Q,aK as R,aL as O,b4 as $,b5 as D,g as f,A as G,D as _,a8 as U,aa as z,af as W,aj as J,ab as j,b6 as X,P as V,Q as Y,M as Z}from"./index-rxBL8Pzd.js";import{S as ee}from"./SingleSidebarNavigationWithHeader-DRFeHKyw.js";import{S as te}from"./sidebarAds-DOvaocSa.js";var v="Switch",[se]=Q(v),[re,ae]=se(v),P=l.forwardRef((t,r)=>{const{__scopeSwitch:a,name:i,checked:n,defaultChecked:o,required:u,disabled:d,value:s="on",onCheckedChange:b,form:c,...m}=t,[h,p]=l.useState(null),g=E(r,w=>p(w)),y=l.useRef(!1),k=h?c||!!h.closest("form"):!0,[x,B]=H({prop:n,defaultProp:o??!1,onChange:b,caller:v});return e.jsxs(re,{scope:a,checked:x,disabled:d,children:[e.jsx(R.button,{type:"button",role:"switch","aria-checked":x,"aria-required":u,"data-state":M(x),"data-disabled":d?"":void 0,disabled:d,value:s,...m,ref:g,onClick:O(t.onClick,w=>{B(K=>!K),k&&(y.current=w.isPropagationStopped(),y.current||w.stopPropagation())})}),k&&e.jsx(F,{control:h,bubbles:!y.current,name:i,value:s,checked:x,required:u,disabled:d,form:c,style:{transform:"translateX(-100%)"}})]})});P.displayName=v;var A="SwitchThumb",T=l.forwardRef((t,r)=>{const{__scopeSwitch:a,...i}=t,n=ae(A,a);return e.jsx(R.span,{"data-state":M(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:r})});T.displayName=A;var ne="SwitchBubbleInput",F=l.forwardRef(({__scopeSwitch:t,control:r,checked:a,bubbles:i=!0,...n},o)=>{const u=l.useRef(null),d=E(u,o),s=$(a),b=D(r);return l.useEffect(()=>{const c=u.current;if(!c)return;const m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(s!==a&&p){const g=new Event("click",{bubbles:i});p.call(c,a),c.dispatchEvent(g)}},[s,a,i]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:d,style:{...n.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});F.displayName=ne;function M(t){return t?"checked":"unchecked"}var S=P,q=T;function N({className:t,...r}){return e.jsx(S,{"data-slot":"switch",className:f("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-[#82ae26] data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:e.jsx(q,{"data-slot":"switch-thumb",className:f("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})}const ie=l.forwardRef(({className:t,...r},a)=>e.jsx(S,{className:f("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-[#82ae26] data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...r,ref:a,children:e.jsx(q,{className:f("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ie.displayName=S.displayName;const oe=({type:t="news"})=>G({staleTime:3e5,queryKey:["subscriptions",t],queryFn:async()=>{try{const a=await _.get(`/api/subscriptions/${t}`),{subscriptions:i}=a.data;return i}catch(a){throw new Error(a.response?.data?.message||"An error occurred while loading subscriptions")}}}),ce=({type:t="news"})=>{const r=U();return z({mutationFn:async i=>{try{return(await _.patch(`/api/subscriptions/${t}`,i)).data}catch(n){throw new Error(n.response?.data?.message||"An error occurred while updating subscriptions")}},onSuccess:i=>{r.setQueryData(["subscriptions",t],i.subscriptions),r.cancelQueries({predicate:n=>{const o=n.queryKey;return o[0]==="subscriptions"&&o[1]===t||o[0]==="search"&&o[1]===t}}),r.invalidateQueries({predicate:n=>{const o=n.queryKey;return o[0]==="search"&&o[1]===t}})}})},C={fr:{news_ar:"News en langue arabe",news_fr:"Actualités en français"},ar:{news_ar:"أخبار باللغة العربية  ",news_fr:"أخبار باللغة الفرنسية"}},I=[{title:"آخر الأخبار",code:"1"},{title:"أخبار",code:"48"},{title:"الأقتصاد",code:"54"},{title:"التكنولوجبا و الاتصالات",code:"56"},{title:"الصحة",code:"58"},{title:"الرياضة",code:"64"},{title:"النقل و السيارات",code:"60"},{title:"في بلادي+",code:"7136"}],L=[{title:"Dernières actualités",code:"2"},{title:"L'info",code:"72"},{title:"Economie",code:"74"},{title:"Technologies",code:"82"},{title:"Santé",code:"76"},{title:"Sport",code:"80"},{title:"Transport et automobiles",code:"78"},{title:"+ Fibladi",code:"6219"}],le=[...I,...L];function de({lang:t}){const{data:r,isFetching:a}=oe({type:"news"}),{mutate:i,isPending:n}=ce({}),[o,u]=l.useState(new Set(r));l.useEffect(()=>{r&&u(new Set(r))},[r]);const d=s=>{u(b=>{const c=new Set(b);c.has(s)?c.delete(s):c.add(s);const m=le.filter(({code:h})=>c.has(h)).map(({title:h,code:p})=>`${h}@${p}`);return i({subscriptions:m}),c})};return e.jsx("div",{className:"text-center flex items-center justify-center",children:e.jsx(W,{className:"w-full",children:e.jsxs(J,{className:"space-y-8 px-8 py-2",children:[e.jsx("div",{className:f("text-left  font-bold text-xl  font-family-Kufi",t==="ar"&&"text-right"),children:C[t].news_ar}),I.map(s=>e.jsxs("div",{className:"flex items-center justify-between   font-family-Kufi",children:[e.jsx(j,{htmlFor:s.title,className:"text-base  cursor-pointer",children:s.title}),e.jsx(N,{disabled:n||a,id:s.title,checked:!!o.has(s.code),onCheckedChange:()=>d(s.code),dir:"ltr"})]},s.title)),e.jsxs("div",{className:f("text-left  font-bold text-xl pt-3 font-family-Kufi",t==="ar"&&"text-right"),children:[" ",C[t].news_fr]}),L.map(s=>e.jsxs("div",{className:"flex items-center justify-between  ",children:[e.jsx(j,{htmlFor:s.title,className:" text-base  cursor-pointer",children:s.title}),e.jsx(N,{disabled:n||a,id:s.title,checked:!!o.has(s.code),onCheckedChange:()=>d(s.code),dir:"ltr"})]},s.title))]})})})}function fe(){const t=X.useParams().lang;return e.jsxs("div",{className:"sm:container text-center flex",children:[e.jsx("div",{className:"hidden md:block md:w-2/5 lg:w-1/3 xl:w-5/22  py-1 ",children:e.jsxs("div",{className:"sticky top-4 mt-2 max-h-[calc(100vh-2rem)] overflow-y-auto hidden-scrollbar",children:[e.jsx(ee,{nav:t==="fr"?V:Y,vr:t}),e.jsx(Z,{vr:t,type:"news"})]})}),e.jsx("div",{className:"w-full md:w-3/5 lg:w-2/3 xl:w-11/22 xl:mx-[calc(100%/44)]  text-5xl py-6 ",children:e.jsxs("div",{className:"text-start ",children:[e.jsx("h1",{className:"text-lg md:text-xl  lg:text-2xl text-[#82ae26] font-semibold ps-2.5 pb-4",children:t==="fr"?"Mes thèmes":"اخباري"}),e.jsx(de,{lang:t})]})}),e.jsx("div",{className:"hidden xl:block xl:w-5/22 py-4",children:e.jsx("div",{className:"sticky top-4",children:e.jsx(te,{},"ads")})})]})}export{fe as component};
