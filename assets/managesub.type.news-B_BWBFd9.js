import{r as l,j as t,g as h,l as H,m as E,Y as O,a9 as Q,w as $,x as G,t as U}from"./index-ELto49OG.js";import{C as D,d as z}from"./card-CfeapdR5.js";import{u as W,c as X,P as R,a as Y}from"./index-B0tENmUr.js";import{u as _}from"./index-vKHEGfV1.js";import{u as J}from"./index-CxjkEpk5.js";import{u as V}from"./index-DU6qdg8l.js";import{L as j}from"./label-BST0d4y5.js";import{u as Z}from"./useMutation-BPC8A9Hf.js";import{S as ee}from"./SingleSidebarNavigationWithHeader-CbO9WXvR.js";import"./index-C95nU48O.js";var g="Switch",[te]=X(g),[se,re]=te(g),P=l.forwardRef((e,r)=>{const{__scopeSwitch:n,name:i,checked:o,defaultChecked:a,required:u,disabled:d,value:s="on",onCheckedChange:m,form:c,...b}=e,[p,f]=l.useState(null),v=_(r,w=>f(w)),y=l.useRef(!1),k=p?c||!!p.closest("form"):!0,[x,B]=W({prop:o,defaultProp:a??!1,onChange:m,caller:g});return t.jsxs(se,{scope:n,checked:x,disabled:d,children:[t.jsx(R.button,{type:"button",role:"switch","aria-checked":x,"aria-required":u,"data-state":F(x),"data-disabled":d?"":void 0,disabled:d,value:s,...b,ref:v,onClick:Y(e.onClick,w=>{B(K=>!K),k&&(y.current=w.isPropagationStopped(),y.current||w.stopPropagation())})}),k&&t.jsx(q,{control:p,bubbles:!y.current,name:i,value:s,checked:x,required:u,disabled:d,form:c,style:{transform:"translateX(-100%)"}})]})});P.displayName=g;var T="SwitchThumb",A=l.forwardRef((e,r)=>{const{__scopeSwitch:n,...i}=e,o=re(T,n);return t.jsx(R.span,{"data-state":F(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:r})});A.displayName=T;var ne="SwitchBubbleInput",q=l.forwardRef(({__scopeSwitch:e,control:r,checked:n,bubbles:i=!0,...o},a)=>{const u=l.useRef(null),d=_(u,a),s=J(n),m=V(r);return l.useEffect(()=>{const c=u.current;if(!c)return;const b=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(b,"checked").set;if(s!==n&&f){const v=new Event("click",{bubbles:i});f.call(c,n),c.dispatchEvent(v)}},[s,n,i]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:d,style:{...o.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});q.displayName=ne;function F(e){return e?"checked":"unchecked"}var S=P,I=A;function C({className:e,...r}){return t.jsx(S,{"data-slot":"switch",className:h("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-[#82ae26] data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:t.jsx(I,{"data-slot":"switch-thumb",className:h("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})}const oe=l.forwardRef(({className:e,...r},n)=>t.jsx(S,{className:h("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-[#82ae26] data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...r,ref:n,children:t.jsx(I,{className:h("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));oe.displayName=S.displayName;const ie=({type:e="news"})=>H({staleTime:3e5,queryKey:["subscriptions",e],queryFn:async()=>{try{const n=await E.get(`/api/subscriptions/${e}`),{subscriptions:i}=n.data;return i}catch(n){throw new Error(n.response?.data?.message||"An error occurred while loading subscriptions")}}}),ae=({type:e="news"})=>{const r=O();return Z({mutationFn:async i=>{try{return(await E.patch(`/api/subscriptions/${e}`,i)).data}catch(o){throw new Error(o.response?.data?.message||"An error occurred while updating subscriptions")}},onSuccess:i=>{r.setQueryData(["subscriptions",e],i.subscriptions),r.cancelQueries({predicate:o=>{const a=o.queryKey;return a[0]==="subscriptions"&&a[1]===e||a[0]==="search"&&a[1]===e}}),r.invalidateQueries({predicate:o=>{const a=o.queryKey;return a[0]==="search"&&a[1]===e}})}})},N={fr:{news_ar:"News en langue arabe",news_fr:"Actualités en français"},ar:{news_ar:"أخبار باللغة العربية  ",news_fr:"أخبار باللغة الفرنسية"}},M=[{title:"آخر الأخبار",code:"1"},{title:"أخبار",code:"48"},{title:"الأقتصاد",code:"54"},{title:"التكنولوجبا و الاتصالات",code:"56"},{title:"الصحة",code:"58"},{title:"الرياضة",code:"64"},{title:"النقل و السيارات",code:"60"},{title:"في بلادي+",code:"7136"}],L=[{title:"Dernières actualités",code:"2"},{title:"L'info",code:"72"},{title:"Economie",code:"74"},{title:"Technologies",code:"82"},{title:"Santé",code:"76"},{title:"Sport",code:"80"},{title:"Transport et automobiles",code:"78"},{title:"+ Fibladi",code:"6219"}],ce=[...M,...L];function le({lang:e}){const{data:r,isFetching:n}=ie({type:"news"}),{mutate:i,isPending:o}=ae({}),[a,u]=l.useState(new Set(r));l.useEffect(()=>{r&&u(new Set(r))},[r]);const d=s=>{u(m=>{const c=new Set(m);c.has(s)?c.delete(s):c.add(s);const b=ce.filter(({code:p})=>c.has(p)).map(({title:p,code:f})=>`${p}@${f}`);return i({subscriptions:b}),c})};return t.jsx("div",{className:"text-center flex items-center justify-center",children:t.jsx(D,{className:"w-full",children:t.jsxs(z,{className:"space-y-8 px-8 py-2",children:[t.jsx("div",{className:h("text-left  font-bold text-xl  font-family-Kufi",e==="ar"&&"text-right"),children:N[e].news_ar}),M.map(s=>t.jsxs("div",{className:"flex items-center justify-between   font-family-Kufi",children:[t.jsx(j,{htmlFor:s.title,className:"text-base  cursor-pointer",children:s.title}),t.jsx(C,{disabled:o||n,id:s.title,checked:!!a.has(s.code),onCheckedChange:()=>d(s.code),dir:"ltr"})]},s.title)),t.jsxs("div",{className:h("text-left  font-bold text-xl pt-3 font-family-Kufi",e==="ar"&&"text-right"),children:[" ",N[e].news_fr]}),L.map(s=>t.jsxs("div",{className:"flex items-center justify-between  ",children:[t.jsx(j,{htmlFor:s.title,className:" text-base  cursor-pointer",children:s.title}),t.jsx(C,{disabled:o||n,id:s.title,checked:!!a.has(s.code),onCheckedChange:()=>d(s.code),dir:"ltr"})]},s.title))]})})})}function ve(){const e=Q.useParams().lang;return t.jsxs("div",{className:"sm:container text-center flex",children:[t.jsx("div",{className:"hidden md:block md:w-2/5 lg:w-1/3 xl:w-5/22  py-1 ",children:t.jsxs("div",{className:"sticky top-2 mt-2",children:[t.jsx(ee,{nav:e==="fr"?$:G,vr:e}),t.jsx(U,{vr:e,type:"news"})]})}),t.jsx("div",{className:"w-full md:w-3/5 lg:w-2/3 xl:w-11/22 xl:mx-[calc(100%/44)]  text-5xl py-6 ",children:t.jsxs("div",{className:"text-start ",children:[t.jsx("h1",{className:"text-lg md:text-xl  lg:text-2xl text-[#82ae26] font-semibold ps-2.5 pb-4",children:e==="fr"?"Mes thèmes":"اخباري"}),t.jsx(le,{lang:e})]})})]})}export{ve as component};
