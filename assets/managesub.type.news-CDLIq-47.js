import{r as l,aJ as E,aF as H,j as t,aH as Q,aK as R,aL as O,b4 as $,b5 as D,g as f,A as G,D as _,a8 as U,aa as z,af as W,aj as J,ab as j,b6 as X,P as V,Q as Y,M as Z}from"./index-dm3QBHmQ.js";import{S as ee}from"./SingleSidebarNavigationWithHeader-CoD98jot.js";var g="Switch",[te]=Q(g),[se,re]=te(g),P=l.forwardRef((e,r)=>{const{__scopeSwitch:n,name:i,checked:a,defaultChecked:o,required:u,disabled:d,value:s="on",onCheckedChange:b,form:c,...m}=e,[p,h]=l.useState(null),v=E(r,w=>h(w)),y=l.useRef(!1),k=p?c||!!p.closest("form"):!0,[x,B]=H({prop:a,defaultProp:o??!1,onChange:b,caller:g});return t.jsxs(se,{scope:n,checked:x,disabled:d,children:[t.jsx(R.button,{type:"button",role:"switch","aria-checked":x,"aria-required":u,"data-state":M(x),"data-disabled":d?"":void 0,disabled:d,value:s,...m,ref:v,onClick:O(e.onClick,w=>{B(K=>!K),k&&(y.current=w.isPropagationStopped(),y.current||w.stopPropagation())})}),k&&t.jsx(F,{control:p,bubbles:!y.current,name:i,value:s,checked:x,required:u,disabled:d,form:c,style:{transform:"translateX(-100%)"}})]})});P.displayName=g;var A="SwitchThumb",T=l.forwardRef((e,r)=>{const{__scopeSwitch:n,...i}=e,a=re(A,n);return t.jsx(R.span,{"data-state":M(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:r})});T.displayName=A;var ne="SwitchBubbleInput",F=l.forwardRef(({__scopeSwitch:e,control:r,checked:n,bubbles:i=!0,...a},o)=>{const u=l.useRef(null),d=E(u,o),s=$(n),b=D(r);return l.useEffect(()=>{const c=u.current;if(!c)return;const m=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(m,"checked").set;if(s!==n&&h){const v=new Event("click",{bubbles:i});h.call(c,n),c.dispatchEvent(v)}},[s,n,i]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:d,style:{...a.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});F.displayName=ne;function M(e){return e?"checked":"unchecked"}var S=P,q=T;function C({className:e,...r}){return t.jsx(S,{"data-slot":"switch",className:f("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-[#82ae26] data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:t.jsx(q,{"data-slot":"switch-thumb",className:f("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})}const ae=l.forwardRef(({className:e,...r},n)=>t.jsx(S,{className:f("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-[#82ae26] data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...r,ref:n,children:t.jsx(q,{className:f("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ae.displayName=S.displayName;const ie=({type:e="news"})=>G({staleTime:3e5,queryKey:["subscriptions",e],queryFn:async()=>{try{const n=await _.get(`/api/subscriptions/${e}`),{subscriptions:i}=n.data;return i}catch(n){throw new Error(n.response?.data?.message||"An error occurred while loading subscriptions")}}}),oe=({type:e="news"})=>{const r=U();return z({mutationFn:async i=>{try{return(await _.patch(`/api/subscriptions/${e}`,i)).data}catch(a){throw new Error(a.response?.data?.message||"An error occurred while updating subscriptions")}},onSuccess:i=>{r.setQueryData(["subscriptions",e],i.subscriptions),r.cancelQueries({predicate:a=>{const o=a.queryKey;return o[0]==="subscriptions"&&o[1]===e||o[0]==="search"&&o[1]===e}}),r.invalidateQueries({predicate:a=>{const o=a.queryKey;return o[0]==="search"&&o[1]===e}})}})},N={fr:{news_ar:"News en langue arabe",news_fr:"Actualités en français"},ar:{news_ar:"أخبار باللغة العربية  ",news_fr:"أخبار باللغة الفرنسية"}},I=[{title:"آخر الأخبار",code:"1"},{title:"أخبار",code:"48"},{title:"الأقتصاد",code:"54"},{title:"التكنولوجبا و الاتصالات",code:"56"},{title:"الصحة",code:"58"},{title:"الرياضة",code:"64"},{title:"النقل و السيارات",code:"60"},{title:"في بلادي+",code:"7136"}],L=[{title:"Dernières actualités",code:"2"},{title:"L'info",code:"72"},{title:"Economie",code:"74"},{title:"Technologies",code:"82"},{title:"Santé",code:"76"},{title:"Sport",code:"80"},{title:"Transport et automobiles",code:"78"},{title:"+ Fibladi",code:"6219"}],ce=[...I,...L];function le({lang:e}){const{data:r,isFetching:n}=ie({type:"news"}),{mutate:i,isPending:a}=oe({}),[o,u]=l.useState(new Set(r));l.useEffect(()=>{r&&u(new Set(r))},[r]);const d=s=>{u(b=>{const c=new Set(b);c.has(s)?c.delete(s):c.add(s);const m=ce.filter(({code:p})=>c.has(p)).map(({title:p,code:h})=>`${p}@${h}`);return i({subscriptions:m}),c})};return t.jsx("div",{className:"text-center flex items-center justify-center",children:t.jsx(W,{className:"w-full",children:t.jsxs(J,{className:"space-y-8 px-8 py-2",children:[t.jsx("div",{className:f("text-left  font-bold text-xl  font-family-Kufi",e==="ar"&&"text-right"),children:N[e].news_ar}),I.map(s=>t.jsxs("div",{className:"flex items-center justify-between   font-family-Kufi",children:[t.jsx(j,{htmlFor:s.title,className:"text-base  cursor-pointer",children:s.title}),t.jsx(C,{disabled:a||n,id:s.title,checked:!!o.has(s.code),onCheckedChange:()=>d(s.code),dir:"ltr"})]},s.title)),t.jsxs("div",{className:f("text-left  font-bold text-xl pt-3 font-family-Kufi",e==="ar"&&"text-right"),children:[" ",N[e].news_fr]}),L.map(s=>t.jsxs("div",{className:"flex items-center justify-between  ",children:[t.jsx(j,{htmlFor:s.title,className:" text-base  cursor-pointer",children:s.title}),t.jsx(C,{disabled:a||n,id:s.title,checked:!!o.has(s.code),onCheckedChange:()=>d(s.code),dir:"ltr"})]},s.title))]})})})}function pe(){const e=X.useParams().lang;return t.jsxs("div",{className:"sm:container text-center flex",children:[t.jsx("div",{className:"hidden md:block md:w-2/5 lg:w-1/3 xl:w-5/22  py-1 ",children:t.jsxs("div",{className:"sticky top-2 mt-2",children:[t.jsx(ee,{nav:e==="fr"?V:Y,vr:e}),t.jsx(Z,{vr:e,type:"news"})]})}),t.jsx("div",{className:"w-full md:w-3/5 lg:w-2/3 xl:w-11/22 xl:mx-[calc(100%/44)]  text-5xl py-6 ",children:t.jsxs("div",{className:"text-start ",children:[t.jsx("h1",{className:"text-lg md:text-xl  lg:text-2xl text-[#82ae26] font-semibold ps-2.5 pb-4",children:e==="fr"?"Mes thèmes":"اخباري"}),t.jsx(le,{lang:e})]})})]})}export{pe as component};
