import{l as n,j as e,S as w,g as v,m as k,r as u,C as A,n as C,o as d,q as g,s as _,t as S,v as M,w as I,R as $,L as z,x as h}from"./index-dm3QBHmQ.js";import{P}from"./plus-DpoFZc3A.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],p=n("archive",E);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],V=n("circle-check-big",L);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],R=n("circle-x",q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],G=n("clock",B);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],F=n("layout-grid",D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],f=n("package",H);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],T=n("rotate-ccw",O);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],X=n("square-pen",U),J=k("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function K({className:s,variant:c,asChild:i=!1,...a}){const r=i?w:"span";return e.jsx(r,{"data-slot":"badge",className:v(J({variant:c}),s),...a})}const Q={active:"bg-green-100 text-green-800",pending:"bg-amber-100 text-amber-800",rejected:"bg-red-100 text-red-800",archived:"bg-gray-100 text-gray-700"},W=({ad:s,onEdit:c,onArchive:i,onActivate:a,isPending:r})=>{const[l,m]=u.useState(!1),x=o=>o===null?"N/A":`${o.toLocaleString()} DA`;return e.jsxs("div",{className:"bg-card rounded-lg shadow-card overflow-hidden border hover:border-border",children:[e.jsxs("div",{className:"flex flex-col  sm:flex-row   sm:gap-2 p-2  cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>m(!l),children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4  flex-1  ",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-lg bg-secondary flex items-center justify-center text-lg sm:text-xl flex-shrink-0 overflow-hidden",children:s.Image?e.jsx("img",{src:"https://images2.fibladi.com/H400/"+s.Image.substring(0,s.Image.lastIndexOf("."))+".webp",alt:s.Sujet,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-muted-foreground text-xs",children:e.jsx(f,{className:"w-8 h-8 sm:w-10 sm:h-10"})})}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1 ",children:[e.jsx("h3",{className:"font-medium text-foreground truncate text-base sm:text-lg line-clamp-2 ",children:s.Sujet}),e.jsx("span",{className:"-mx-2 hidden lg:inline-block  py-1 px-2  text-sm font-medium bg-orange-400 text-white rounded-full",children:s.Classe}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:s.CreatedOn})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[s.Price!==null&&e.jsx("span",{className:"font-bold text-foreground text-sm sm:text-base",children:x(s.Price)}),e.jsx("div",{className:"flex-1"}),e.jsx(K,{className:v("capitalize text-sm px-2 py-0.5",Q[s.Status]),children:s.Status}),e.jsx("div",{className:"text-muted-foreground",children:l?e.jsx(A,{className:"w-4 h-4"}):e.jsx(C,{className:"w-4 h-4"})})]})]}),l&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 px-3 sm:px-4 py-3 bg-muted/30 border-t border-border",children:[e.jsxs("div",{className:"flex flex-col items-start gap-1 sm:gap-1 text-xs sm:text-sm text-muted-foreground  ",children:[e.jsxs("span",{className:"lg:hidden",children:["Category: ",e.jsx("strong",{className:"text-foreground",children:s.Classe})]}),e.jsxs("span",{children:["Vue:"," ",e.jsx("strong",{className:"text-foreground",children:s.NbVisite??0})]})]}),e.jsxs("div",{className:"flex  gap-2 ml-auto",children:[e.jsxs(d,{variant:"outline",size:"sm",className:"gap-1 sm:gap-2 text-xs sm:text-sm h-8",onClick:()=>c(s),children:[e.jsx(X,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Modifier"})]}),s.Status==="archived"?e.jsxs(d,{variant:"outline",size:"sm",className:"gap-1 sm:gap-2 text-xs sm:text-sm h-8 text-green-600 hover:text-green-600",onClick:()=>a(s.Id_CmsAnnonce),disabled:r,children:[r?e.jsx(g,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin"}):e.jsx(T,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Activer"})]}):e.jsxs(d,{variant:"outline",size:"sm",className:"gap-1 sm:gap-2 text-xs sm:text-sm h-8 text-destructive hover:text-destructive",onClick:()=>i(s.Id_CmsAnnonce,s.Status),disabled:r,children:[r?e.jsx(g,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin"}):e.jsx(p,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Archiver"})]})]})]})]})},Y=[{value:"total",label:"Toutes",icon:e.jsx(F,{className:"h-4 w-4"})},{value:"active",label:"Actives",icon:e.jsx(V,{className:"h-4 w-4"})},{value:"pending",label:"En attente",icon:e.jsx(G,{className:"h-4 w-4"})},{value:"rejected",label:"Refusées",icon:e.jsx(R,{className:"h-4 w-4"})},{value:"archived",label:"Archivées",icon:e.jsx(p,{className:"h-4 w-4"})}];function se(){const[s,c]=u.useState("total"),[i,a]=u.useState(null),{data:r}=_({status:s==="total"?"all":s}),{data:l}=S(),m=M(),x=I(),o=r?.data??[],b=$.useParams().lang,j=(t,y)=>{a(t),m.mutate({id:t,previousStatus:y},{onSuccess:()=>{h.success("Annonce archivée avec succès"),a(null)},onError:()=>{h.error("Erreur lors de l'archivage"),a(null)}})},N=t=>{a(t),x.mutate({id:t},{onSuccess:()=>{h.success("Annonce activée avec succès"),a(null)},onError:()=>{h.error("Erreur lors de l'activation"),a(null)}})};return e.jsxs("div",{className:"sm:container p-4 ",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between sm:mx-2.5",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-orange-500 md:text-3xl ",children:"Mes annonces"})}),e.jsx(z,{to:"/$lang/ads/create",params:{lang:b},children:e.jsxs(d,{variant:"hero",className:"gap-2  ",children:[e.jsx(P,{className:"h-4 w-4"}),"Create New Ad"]})})]}),e.jsx("div",{className:"mb-6 flex flex-wrap gap-2 sm:mx-2.5",children:Y.map(t=>e.jsxs(d,{variant:"ghost",onClick:()=>c(t.value),className:`flex items-center gap-2   transition-all ${s===t.value?"bg-orange-500 hover:bg-orange-500/90 text-white hover:text-white":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:[t.icon,t.label,e.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs ${s===t.value?"bg-accent-foreground/20":"bg-background"}`,children:l?.[t.value]})]},t.value))}),e.jsx("div",{className:"space-y-2 sm:mx-2.5",children:o.length===0?e.jsxs("div",{className:"bg-card rounded-xl shadow-card p-12 text-center",children:[e.jsx(f,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"Aucune annonce trouvée"})]}):o.map(t=>e.jsx(W,{ad:t,onEdit:()=>{},onArchive:j,onActivate:N,isPending:i===t.Id_CmsAnnonce&&m.isPending||x.isPending},t.Id_CmsAnnonce))})]})}export{se as component};
