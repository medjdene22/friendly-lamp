import{az as f,r as j,ay as P,am as g,an as C,j as s,af as v,ag as y,ah as O,ai as b,aj as F,ao as S,ap as i,aq as o,ar as t,ac as d,aV as c,as as l,aW as R,o as D,q as N,a5 as T,x as u}from"./index-DLwvBtN-.js";function E(){const[e,w]=j.useState(!1),h=P({currentPassword:m(),newPassword:m(),confirmPassword:m()}).refine(a=>a.newPassword===a.confirmPassword,{message:"PASSWORDS MUST MATCH",path:["confirmPassword"]}),n=g({resolver:C(h),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}});async function p({currentPassword:a,newPassword:r}){try{w(!0),await T.changePassword({currentPassword:a,newPassword:r,revokeOtherSessions:!0,fetchOptions:{throw:!0}}),u.success("Password changed successfully")}catch(x){u.error("Password change failed "+x)}finally{w(!1)}}return s.jsx("div",{className:"flex items-center justify-center py-8 bg-slate-200 dark:bg-transparent",children:s.jsxs(v,{className:"w-full sm:max-w-lg  dark:bg-slate-950",children:[s.jsxs(y,{children:[s.jsx(O,{className:"text-base sm:text-xl",children:"Change Password"}),s.jsx(b,{className:"text-xs sm:text-base",children:"Set a new password for your account"})]}),s.jsx(F,{children:s.jsx("form",{id:"form-rhf-input",onSubmit:n.handleSubmit(p),children:s.jsxs(S,{children:[s.jsx(i,{name:"currentPassword",control:n.control,render:({field:a,fieldState:r})=>s.jsxs(o,{"data-invalid":r.invalid,children:[s.jsx(t,{htmlFor:"form-rhf-input-currentPassword",children:"Current Password"}),s.jsx(d,{...a,type:"password",id:"form-rhf-input-currentPassword","aria-invalid":r.invalid,placeholder:"current password",autoComplete:"current-password"}),s.jsx(c,{}),r.invalid&&s.jsx(l,{errors:[r.error]})]})}),s.jsx(i,{name:"newPassword",control:n.control,render:({field:a,fieldState:r})=>s.jsxs(o,{"data-invalid":r.invalid,children:[s.jsx(t,{htmlFor:"form-rhf-input-newPassword",children:"New Password"}),s.jsx(d,{type:"password",...a,id:"form-rhf-input-newPassword","aria-invalid":r.invalid,placeholder:"new password",autoComplete:"new-password"}),s.jsx(c,{}),r.invalid&&s.jsx(l,{errors:[r.error]})]})}),s.jsx(i,{name:"confirmPassword",control:n.control,render:({field:a,fieldState:r})=>s.jsxs(o,{"data-invalid":r.invalid,children:[s.jsx(t,{htmlFor:"form-rhf-input-confirmPassword",children:"Confirm Password"}),s.jsx(d,{...a,type:"password",id:"form-rhf-input-confirmPassword","aria-invalid":r.invalid,placeholder:"current password",autoComplete:"current-password"}),s.jsx(c,{}),r.invalid&&s.jsx(l,{errors:[r.error]})]})})]})})}),s.jsx(R,{children:s.jsx(o,{orientation:"responsive",children:s.jsxs(D,{type:"submit",form:"form-rhf-input",children:[e&&s.jsx(N,{className:"animate-spin"}),e?"Changing password...":"Change Password"]})})})]})})}function m(){let e=f().min(1,{message:"PASSWORD REQUIRED"});return e=e.min(8,{message:"PASSWORD TOO SHORT"}),e=e.max(18,{message:"PASSWORD TOO LONG"}),e}export{E as component,m as getPasswordSchema};
