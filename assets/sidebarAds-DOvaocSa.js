import{A as i,hS as o,j as s,q as l}from"./index-rxBL8Pzd.js";const c="https://apiw.fibladi.com";function d(e){return`https://images2.fibladi.com/H500/${e.replace(/\.[^.]+$/,"")}.webp`}function m(e){return`https://images2.fibladi.com/H50/${(e.split("/").pop()||e).replace(/\.[^.]+$/,"")}.webp`}const u=(e=2)=>i({queryKey:["adsFeed",e],staleTime:300*1e3,queryFn:async()=>{try{const{data:r}=await o.get(`${c}/api/ads/feed?limit=${e}`);return r.map(t=>({...t,title:t.title||t.Sujet}))}catch(r){throw new Error(r.response?.data?.message||"An error occurred while loading ads feed")}}}),p=({ad:e})=>{const r=e.image?d(e.image):"",t=e.logo?m(e.logo):"",a=e.LinkToshop||e.Link||"#";return s.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"group block overflow-hidden rounded-xl border border-border bg-card shadow-sm transition-shadow hover:shadow-md",children:[r&&s.jsx("div",{className:"relative aspect-4/3  w-full overflow-hidden",children:s.jsx("img",{src:r,alt:e.title,className:"w-full h-full   object-fill transition-transform duration-300 group-hover:scale-105"})}),s.jsxs("div",{className:"p-2 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[t&&s.jsx("img",{src:t,alt:e.company_name,className:"size-6 rounded-full object-cover shrink-0",onError:n=>{n.currentTarget.style.display="none"}}),s.jsx("span",{className:"text-xs text-muted-foreground truncate",children:e.company_name})]}),s.jsx("h3",{className:"text-sm font-semibold leading-snug line-clamp-2",children:e.title}),e.LinkLabel&&s.jsx("span",{className:"inline-block text-xs font-medium text-primary hover:underline",children:e.LinkLabel})]})]})},x=()=>{const{data:e,isLoading:r}=u(2);return r?s.jsx("div",{className:"flex justify-center py-10",children:s.jsx(l,{className:"size-5 animate-spin text-muted-foreground"})}):!e||e.length===0?null:s.jsx("div",{className:"space-y-3",children:e.map(t=>s.jsx(p,{ad:t},t.id))})};export{x as S};
