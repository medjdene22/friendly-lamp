import{X as d,Y as w,Z as j,_ as i,m as y,j as e,L as N}from"./index-Bw-RzcdV.js";import{u as v}from"./useMutation-BHTbL1lY.js";import{B as b}from"./button-CnNnvQyh.js";import{I as t}from"./input-BsLWNVz5.js";import{L as o}from"./label-CNVmPi39.js";import{L as C}from"./Logo-lzg_ON_o.js";import{L as F}from"./loader-circle-BLAiWhQI.js";import"./index-CE8Rpjt9.js";import"./index-CCPfqceP.js";function z(){const{redirectUrl:p}=d.useRouteContext(),u=w(),x=j(),{mutate:f,isPending:s}=v({mutationFn:async a=>{try{return(await y.post("/api/auth/register",{...a})).data}catch(r){throw new Error(r.response?.data?.message||"An error occurred while signing in.")}},onError:a=>{i.error(a.message||"An error occurred while signing up.")},onSuccess:async()=>{u.removeQueries({queryKey:["user"]}),i.success("signup succes "),x({to:p})}}),g=a=>{if(a.preventDefault(),s)return;const r=new FormData(a.currentTarget),l=r.get("name"),m=r.get("email"),n=r.get("password"),c=r.get("confirm_password");if(!(!l||!m||!n||!c)){if(n!==c){i.error("Passwords do not match.");return}f({name:l,email:m,password:n})}},h=d.useParams().lang;return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("form",{onSubmit:g,children:e.jsxs("div",{className:"flex flex-col gap-12",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-md",children:e.jsx(C,{label:"Fibladi ",size:"size-10",className:"  justify-center  ",textclassName:"text-2xl  md:text-4xl  font-medium  font-family-be-vietnam-pro ",link:"https://fibladi.com/fr"})}),e.jsx("span",{className:"sr-only",children:"Fibladi"})]}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"name",children:"Name"}),e.jsx(t,{id:"name",name:"name",type:"text",placeholder:"John Doe",readOnly:s,required:!0,autoComplete:"name"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsx(t,{id:"email",name:"email",type:"email",placeholder:"hello@example.com",readOnly:s,required:!0,autoComplete:"email"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"password",children:"Password"}),e.jsx(t,{id:"password",name:"password",type:"password",placeholder:"Password",readOnly:s,required:!0,autoComplete:"new-password"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"confirm_password",children:"Confirm Password"}),e.jsx(t,{id:"confirm_password",name:"confirm_password",type:"password",placeholder:"Confirm Password",readOnly:s,required:!0,autoComplete:"new-password"})]}),e.jsxs(b,{type:"submit",className:"mt-2 w-full",size:"lg",disabled:s,children:[s&&e.jsx(F,{className:"animate-spin"}),s?"Signing up...":"Sign up"]})]})]})}),e.jsxs("div",{className:"text-center text-sm",children:["Already have an account?"," ",e.jsx(N,{to:"/$lang/login",params:{lang:h},search:{callbackUrl:void 0},className:"underline underline-offset-4",children:"Login"})]})]})}export{z as component};
