import{a7 as m,a8 as w,a9 as j,aa as y,x as o,D as N,j as e,ab as n,ac as t,o as v,q as b,L as C}from"./index-rxBL8Pzd.js";import{L as F}from"./Logo-DRS-whNi.js";function L(){const{redirectUrl:u}=m.useRouteContext(),p=w(),x=j(),{mutate:g,isPending:s}=y({mutationFn:async r=>{try{return(await N.post("/api/auth/register",{...r})).data}catch(a){throw new Error(a.response?.data?.message||"An error occurred while signing in.")}},onError:r=>{o.error(r.message||"An error occurred while signing up.")},onSuccess:async()=>{p.removeQueries({queryKey:["user"]}),o.success("signup succes "),x({to:u})}}),h=r=>{if(r.preventDefault(),s)return;const a=new FormData(r.currentTarget),l=a.get("name"),c=a.get("email"),i=a.get("password"),d=a.get("confirm_password");if(!(!l||!c||!i||!d)){if(i!==d){o.error("Passwords do not match.");return}g({name:l,email:c,password:i})}},f=m.useParams().lang;return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("form",{onSubmit:h,children:e.jsxs("div",{className:"flex flex-col gap-12",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-md",children:e.jsx(F,{label:"Fibladi ",size:"size-10",className:"  justify-center  ",textclassName:"text-2xl  md:text-4xl  font-medium  font-family-be-vietnam-pro ",link:"https://fibladi.com/fr"})}),e.jsx("span",{className:"sr-only",children:"Fibladi"})]}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"name",children:"Name"}),e.jsx(t,{id:"name",name:"name",type:"text",placeholder:"John Doe",readOnly:s,required:!0,autoComplete:"name"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"email",children:"Email"}),e.jsx(t,{id:"email",name:"email",type:"email",placeholder:"hello@example.com",readOnly:s,required:!0,autoComplete:"email"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"password",children:"Password"}),e.jsx(t,{id:"password",name:"password",type:"password",placeholder:"Password",readOnly:s,required:!0,autoComplete:"new-password"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"confirm_password",children:"Confirm Password"}),e.jsx(t,{id:"confirm_password",name:"confirm_password",type:"password",placeholder:"Confirm Password",readOnly:s,required:!0,autoComplete:"new-password"})]}),e.jsxs(v,{type:"submit",className:"mt-2 w-full",size:"lg",disabled:s,children:[s&&e.jsx(b,{className:"animate-spin"}),s?"Signing up...":"Sign up"]})]})]})}),e.jsxs("div",{className:"text-center text-sm",children:["Already have an account?"," ",e.jsx(C,{to:"/$lang/login",params:{lang:f},search:{callbackUrl:void 0},className:"underline underline-offset-4",children:"Login"})]})]})}export{L as component};
